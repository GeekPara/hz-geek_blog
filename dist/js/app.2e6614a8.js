(function(e){function t(t){for(var a,s,o=t[0],c=t[1],u=t[2],l=0,p=[];l<o.length;l++)s=o[l],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i=[];function s(e){return o.p+"js/"+({about:"about"}[e]||e)+"."+{about:"08e936be","chunk-2d2308c0":"38e120a9","chunk-b24577de":"63fe257c"}[e]+".js"}function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=s(e);var u=new Error;i=function(t){c.onerror=c.onload=null,clearTimeout(l);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",u.name="ChunkLoadError",u.type=a,u.request=i,r[1](u)}n[e]=void 0}};var l=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var d=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"56d7":function(e,t,r){"use strict";r.r(t);var a,n,i,s,o,c=r("b85c"),u=(r("96cf"),r("1da1")),l=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("a026")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[r("v-app-bar",{attrs:{app:""}},[r("v-app-bar-nav-icon"),r("v-app-bar-title",[e._v("衡中极客圈")]),r("v-spacer"),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[e.isLogin?r("v-avatar",e._g(e._b({staticClass:"mr-10",attrs:{size:"32"}},"v-avatar",n,!1),a),[r("img",{attrs:{src:e.avatar}})]):e._e()]}}])},[r("span",[e._v(e._s(e.tooltipUsername))])]),r("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,n=t.attrs;return[r("v-btn",e._g(e._b({attrs:{color:"primary",elevation:"2"}},"v-btn",n,!1),a),[e._v("登录")])]}}])},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[e._v("登录：衡中极客圈")]),r("v-card-text",[r("v-text-field",{attrs:{label:"用户名/邮箱",outlined:""},model:{value:e.usernameL,callback:function(t){e.usernameL=t},expression:"usernameL"}}),r("v-text-field",{attrs:{label:"密码",outlined:""},model:{value:e.passwordL,callback:function(t){e.passwordL=t},expression:"passwordL"}})],1),r("v-divider"),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.login()}}},[e._v("登录")])],1)],1)],1)],1),r("v-navigation-drawer",{attrs:{permanent:"",app:""}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",{staticClass:"title"},[e._v("Application")]),r("v-list-item-subtitle",[e._v("subtext")])],1)],1),r("v-divider"),r("v-list",{attrs:{dense:"",nav:""}},[r("v-list-item",[r("v-list-item-icon",[r("v-icon",[e._v("mdi-image")])],1),r("v-list-item-content",[r("v-list-item-title",[e._v("123")])],1)],1)],1)],1),r("v-main",{staticClass:"grey lighten-3"},[r("v-container",[r("transition",{attrs:{name:"fade"}},[r("router-view")],1)],1),r("v-speed-dial",{attrs:{top:e.top,bottom:e.bottom,right:e.right,left:e.left,direction:e.direction,"open-on-hover":e.hover,transition:e.transition,fixed:e.fixed},scopedSlots:e._u([{key:"activator",fn:function(){return[e.isLogin?r("v-btn",{attrs:{color:"blue darken-2",dark:"",fab:""},model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.fab?r("v-icon",[e._v("mdi-close")]):r("v-icon",[e._v("mdi-account-circle")])],1):e._e()]},proxy:!0}]),model:{value:e.fab,callback:function(t){e.fab=t},expression:"fab"}},[e.canWrite?r("router-link",{attrs:{to:"/write/new-article"}},[r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"green"}},[r("v-icon",[e._v("mdi-pencil")])],1)],1):e._e(),r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"indigo"}},[r("v-icon",[e._v("mdi-plus")])],1),r("v-btn",{attrs:{fab:"",dark:"",small:"",color:"red"},on:{click:e.logout}},[r("v-icon",[e._v("mdi-logout")])],1)],1)],1)],1)},p=[];r("c975");localStorage.setItem("debug","leancloud*");var f={name:"Main",methods:{plsLogin:function(){i=new n.Dialog("#login-dialog"),s=new n.Dialog("#signUp-dialog"),o=new n.Dialog("#resetPassword-dialog"),i.open()},logout:function(){a.User.logOut(),location.reload()},login:function(){var e=this.usernameL,t=this.passwordL;""!=e&&""!=t?-1!=e.indexOf("@")&&-1!=e.indexOf(".")?a.User.loginWithEmail(e,t).then(Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.snackbar("登录成功~"),location.reload();case 2:case"end":return e.stop()}}),e)}))),(function(e){return 216==e.code?n.snackbar("您的邮箱还未验证"):210==e.code?n.snackbar("用户名或密码不正确"):211==e.code?n.snackbar("该用户不存在"):219==e.code?n.snackbar("密码错误次数过多，15分钟后再试"):void n.snackbar("登录失败，未知原因")})):a.User.logIn(e,t).then(Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.User.current().getRoles();case 2:t=e.sent,t||(r=new a.Query("_Role"),r.equalTo("name","Subscriber"),r.first().then((function(e){e.getUsers().add(a.User.current())}),(function(){return n.snackbar("添加权限错误，请联系管理员")}))),n.snackbar("登录成功~"),location.reload();case 6:case"end":return e.stop()}}),e)}))),(function(e){return 216==e.code?n.snackbar("您的邮箱还未验证"):210==e.code?n.snackbar("用户名或密码不正确"):211==e.code?n.snackbar("该用户不存在"):219==e.code?n.snackbar("密码错误次数过多，15分钟后再试"):void n.snackbar("登录失败，未知原因")})):n.snackbar("请输入用户名和密码~")},signUp:function(){i.close(),s.open()},resetPwd:function(){i.close(),o.open()},sendResetEmail:function(){if(!this.emailR)return n.snackbar("请填写邮箱~");a.User.requestPasswordReset(this.emailR).then((function(){n.snackbar("重置邮件已发送~"),o.close()}),(function(e){if(219==e.code)return n.snackbar("该邮箱并未注册");n.snackbar("发送重置邮件失败，未知原因")}))},signupSubmit:function(){var e=this.username,t=this.email,r=this.password,i=this.confirm;if(""==e||""==t||""==r||""==i)return n.snackbar("把信息填完整再注册哦~");if(i!=r)return n.snackbar("两次输入的密码不一致~");if(-1==t.indexOf("@")||-1==t.indexOf("."))return n.snackbar("邮箱格式不对");var o=new a.User;o.setUsername(e),o.setPassword(r),o.setEmail(t),o.signUp().then((function(){n.snackbar("注册成功！请查收验证邮件~"),s.close()}),(function(e){return 202==e.code?n.snackbar("该用户名已被占用"):203==e.code?n.snackbar("该邮箱已被占用"):void n.snackbar("注册失败，未知原因")}))}},watch:{confirm:function(){this.password==this.confirm?(this.confirmError=!1,this.passwordError=!1):this.confirmError=!0},password:function(){this.password==this.confirm?(this.passwordError=!1,this.confirmError=!1):this.passwordError=!0}},computed:{tooltipUsername:function(){return this.currentUser?this.getUserInfo(this.currentUser).username:null},avatar:function(){return this.currentUser?this.getUserInfo(this.currentUser).avatar:null},activeFab:function(){switch(this.tabs){case"one":return{class:"purple",icon:"account_circle"};case"two":return{class:"red",icon:"edit"};case"three":return{class:"green",icon:"keyboard_arrow_up"};default:return{}}}},data:function(){return{confirmError:!1,passwordError:!1,username:"",email:"",password:"",confirm:"",usernameL:"",emailL:"",passwordL:"",emailR:"",canWrite:!1,isLogin:!1,links:["Dashboard","Messages","Profile","Updates"],direction:"top",fab:!1,fling:!1,hover:!0,tabs:null,top:!1,right:!0,bottom:!0,left:!1,fixed:!0,transition:"scale-transition"}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=this.AV,n=this.mdui,e.next=4,this.isEditor();case 4:this.canWrite=e.sent,this.isLogin=this.isLogingIn();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},m=f,v=r("2877"),b=r("6544"),h=r.n(b),g=r("7496"),w=r("40dc"),k=r("5bc1"),y=r("bb78"),x=r("8212"),_=r("8336"),U=r("b0af"),V=r("99d9"),L=r("a523"),O=r("169a"),C=r("ce7e"),j=r("132d"),I=r("8860"),R=r("da13"),E=r("5d23"),S=r("34c3"),A=r("f6c4"),T=r("f774"),P=r("2fa4"),D=r("c73b"),M=r("8654"),H=r("3a2f"),W=Object(v["a"])(m,d,p,!1,null,null,null),q=W.exports;h()(W,{VApp:g["a"],VAppBar:w["a"],VAppBarNavIcon:k["a"],VAppBarTitle:y["a"],VAvatar:x["a"],VBtn:_["a"],VCard:U["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VContainer:L["a"],VDialog:O["a"],VDivider:C["a"],VIcon:j["a"],VList:I["a"],VListItem:R["a"],VListItemContent:E["a"],VListItemIcon:S["a"],VListItemSubtitle:E["b"],VListItemTitle:E["c"],VMain:A["a"],VNavigationDrawer:T["a"],VSpacer:P["a"],VSpeedDial:D["a"],VTextField:M["a"],VTooltip:H["a"]});var z=r("8ceb"),B=(r("7ce9"),r("d3b7"),r("8c4f")),F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mdui-col-xs-12 mdui-col-md-10 mdui-col-offset-md-1"},e._l(e.articles,(function(t){return r("div",{key:t.route,staticClass:"mdui-card mdui-hoverable mdui-m-y-2"},[r("router-link",{attrs:{to:t.route}},[r("div",{staticClass:"mdui-card-media",staticStyle:{height:"20rem"}},[r("img",{staticClass:"mdui-img-fluid",attrs:{src:t.headImage}})]),r("div",{staticClass:"mdui-card-media-covered mdui-card-media-covered-top"},[r("div",{staticClass:"mdui-card-primary"},[r("div",{staticClass:"mdui-card-primary-title"},[e._v(e._s(t.title))]),r("div",{staticClass:"mdui-card-primary-subtitle"},[e._v(e._s(t.subtitle))])])]),r("div",{staticClass:"mdui-card-media-covered mdui-card-media-covered-gradient"},[r("div",{staticClass:"mdui-card-header"},[r("img",{staticClass:"mdui-card-header-avatar",attrs:{src:t.avatar}}),r("div",{staticClass:"mdui-card-header-title"},[e._v(e._s(t.authorName))]),r("div",{staticClass:"mdui-card-header-subtitle"},[e._v(e._s(t.date))])])])])],1)})),0)},G=[],K=(r("99af"),r("7db0"),{name:"Home",components:{},data:function(){return{articles:[]}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,i,s,o,u,l,d,p,f,m,v,b,h,g,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.AV,r=new t.Query("Article"),r.descending("createdAt"),e.next=5,r.find();case 5:a=e.sent,n=Object(c["a"])(a),e.prev=7,n.s();case 9:if((i=n.n()).done){e.next=29;break}return s=i.value,o=[s.get("headImage")||"//cdn.w3cbus.com/mdui.org/docs/assets/docs/img/card.jpg",s.get("title"),s.get("subtitle"),s.get("author"),s.get("onlyTag"),s.createdAt],u=o[0],l=o[1],d=o[2],p=o[3],f=o[4],m=o[5],v=new t.Query("_Users"),e.prev=13,e.next=16,v.get(p.id);case 16:g=e.sent,b=this.getUserInfo(g).username,h=this.getUserInfo(g).avatar,e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](13),b="已注销的用户",h="//api.multiavatar.com/anonymous.svg";case 25:w="".concat(m.getFullYear(),"年").concat(m.getMonth()+1,"月").concat(m.getDate(),"日"),this.articles.push({title:l,subtitle:d,headImage:u,avatar:h,authorName:b,route:"/article/"+f,date:w});case 27:e.next=9;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e["catch"](7),n.e(e.t1);case 34:return e.prev=34,n.f(),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[7,31,34,37],[13,21]])})));function t(){return e.apply(this,arguments)}return t}()}),N=K,Q=Object(v["a"])(N,F,G,!1,null,null,null),$=Q.exports;l["a"].use(B["a"]);var J=[{path:"/",name:"Home",component:$},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}},{path:"/article/:onlyTag",name:"Article",component:function(){return r.e("chunk-b24577de").then(r.bind(null,"3ad6"))}},{path:"/write/:onlyTag",name:"Write",component:function(){return r.e("chunk-2d2308c0").then(r.bind(null,"ed6a"))}}],Y=new B["a"]({mode:"history",routes:J}),X=Y,Z=r("c72e"),ee=r.n(Z),te=r("7be5"),re=r.n(te),ae=(r("ef7a"),r("f309")),ne=r("c0a4"),ie=r.n(ne);l["a"].use(ae["a"]);var se=new ae["a"]({theme:{themes:{light:{primary:ie.a.purple.base,secondary:ie.a.blue.base,accent:ie.a.lightGreen.base,error:ie.a.red.base,warning:ie.a.amber.base,info:ie.a.cyan.base,success:ie.a.green.base}}}});ee.a.init({appId:"cGsb2KHXLfjY2o1Gg2hOSHgS-gzGzoHsz",appKey:"9nusFqKOHcUvSScKrbfj5wcn",serverURL:"https://cgsb2khx.lc-cn-n1-shared.com"}),l["a"].config.productionTip=!1,l["a"].prototype.AV=ee.a,l["a"].prototype.mdui=z["a"],l["a"].prototype.currentUser=ee.a.User.current(),l["a"].prototype.getUserInfo=function(e){var t,r;return t=e.get("avatar")?e.get("avatar"):"//api.multiavatar.com/".concat(e.get("username"),".svg"),r=e.get("username"),{avatar:t,username:r}},l["a"].prototype.isLogingIn=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!ee.a.User.current()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.abrupt("return",!1);case 3:case"end":return e.stop()}}),e)}))),l["a"].prototype.isEditor=Object(u["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=21;break}return e.next=3,this.currentUser.getRoles();case 3:t=e.sent,r=Object(c["a"])(t),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=13;break}if(n=a.value,"Editor"!=n.get("name")){e.next=11;break}return e.abrupt("return",!0);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",!1);case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])}))),l["a"].use(z["a"]),l["a"].use(re.a),new l["a"]({router:X,vuetify:se,render:function(e){return e(q)}}).$mount("#app")}});